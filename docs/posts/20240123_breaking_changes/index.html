<!DOCTYPE html>
<html lang="es-AR">

<head>
	
	<title>Breaking Changes | mi Blog | iyaki</title>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="description" content="Breve relato sobre mi experiencia al intentar migrar mi website a eleventy sin hacer inaccesibles las antiguas URIs.">
	<meta name="author" content="Ivan Yakimovicz">
	<meta name="keywords" content="Ivan Yakimovicz, Ivan Yaki, iyaki">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link rel="icon" type="image/svg+xml" href="/images/logo.svg">
	
		<link href="/css/posts.css" rel="stylesheet">
	
	
  
	<link rel="canonical" href="https://iyaki.ar/posts/20240123_breaking_changes/">
	
	<script>!function(t,e){var o,p,n,i;e.__SV||(window.posthog=e,e._i=[],e.init=function(r,s,a){function c(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(n=t.createElement("script")).type="text/javascript",n.async=!0,n.src=s.api_host+"/static/array.js",(i=t.getElementsByTagName("script")[0]).parentNode.insertBefore(n,i);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags".split(" "),p=0;p<o.length;p++)c(u,o[p]);e._i.push([r,s,a])},e.__SV=1)}(document,window.posthog||[]),posthog.init("phc_GiyRIzw94jjfJLj7Wm2KozJ1LnuFPY81cc3HymGjqd4",{api_host:"https://app.posthog.com"})</script>
</head>

<body>
	<header class="header-panel blog-header">
	<div class="blog-header__title">
		<a href="/" title="Inicio ">
			<img src="/images/logo.svg" alt="Logo de mi web, unos anteojos 3D de cartón blanco con film azul y rojo" title="Allons-y!" async>
		</a>
		<a href="/blog">
			<h1>mi<br>Blog</h1>
		</a>
	</div>
</header>
<main class="main-panel main-content">
	<aside aria-label="newsletter-form">
		<style>
.newsletter-form{border:.15em solid var(--box-border-color);padding:.5em 3em 1em}
.newsletter-form,.newsletter-form header *{text-align:center}
.newsletter-form button,.newsletter-form input{border:1px solid var(--box-border-color);border-radius:3px;font-size:var(--base-font-size);margin:.1em auto;padding:.25em 1em}
.newsletter-form input{background-color:transparent}
.newsletter-form button{background-color:var(--blog-header-background-color);color:#f5f5f5;cursor:pointer}
.newsletter-form button:hover{box-shadow:3px 3px 3px var(--blog-header-background-color);text-shadow:#fff 1px 1px .5em;translate:-2px -2px}
.newsletter-form button:active{box-shadow:none;translate:none}		</style>
		<article class="newsletter-form">
			<header>
				<h2>No te vuelvas a perder un post!</h2>
				<p>Subscribite a la newsletter de mi Blog</p>
			</header>
			<form action="https://simple-newsletter.com/subscriptions/">
				<input type="hidden" name="uri" value="https://iyaki.ar/posts/feed.xml">
				<label>
					<span lang="en">E-mail</span>:
					<input type="email" name="email" required>
				</label>
				<button type="submit">Subscribirme</button>
			</form>
		</article>
	</aside>
	<article>
	<h1 lang="en">Breaking Changes</h1>
<p>Si utilizan <abbr title="Really Simple Sindication" lang="en">RSS</abbr> para seguir los artículos que escribo en mi blog personal, es posible que a fines del 2023 se hayan encontrado con <a href="https://iyaki.ar/posts/20231217_cambios_en_feeds_rss/" target="_blank">este post</a> en el que comento algunos cambios importantes sobre mis feeds <abbr title="Really Simple Sindication" lang="en">RSS</abbr>, que acompañan la migración de mi sitio web a <a href="https://www.11ty.dev/" target="_blank" lang="en" hreflang="en">eleventy</a>.</p>
<p>Hoy vengo a contar un poco sobre como estoy gestionando estos cambios en las <span lang="en">URIs</span> de las distintas páginas de mi <span lang="en">website</span>, siempre con el objetivo de mantener la mayor retrocompatibilidad posible, evitando así <i lang="en">breaking changes</i>.</p>
<p>Al migrar a <span lang="en">eleventy</span> decidí hacer caso a los consejos de <a href="https://www.w3.org/Provider/Style/URI" target="_blank" lang="en">Cool URIs don’t change</a> y eliminar la extensión <code>.html</code> de las <span lang="en">URIs</span> de mis páginas (el cual es ademas el comportamiento predeterminado de <span lang="en">eleventy</span>). Inmediatamente, comencé a buscar una manera de mantener las antiguas <span lang="en">URIs</span> funcionando.</p>
<p>Como soy una persona de bien, que respeta el protocolo <abbr title="HyperText Transfer Protocol" lang="en">HTTP</abbr>, mi primera intención fue configurar redirecciones (<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/301" target="_blank" lang="en" hreflang="en">301 - Moved Permanently</a>) para que todas las direcciones antiguas redirigiesen de forma automática a las nuevas y el cambio en las <span lang="en">URIs</span> fuese explícito y visible para los visitantes de mi web. Esta era la opción más adecuada, pero, al parecer, <a href="https://pages.github.com/" target="_blank" lang="en" hreflang="en">Github Pages</a> (<i lang="en">hosting</i> que utilizo para mi <span lang="en">website</span>) no tiene soporte para configurar redirecciones más allá del clásico <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404" target="_blank" lang="en" hreflang="en">404 - Not Found</a>.</p>
<p>Fue entonces cuando revisando los directorios y archivos de mi sitio descubrí cuál sería la primera solución que implementaría: No hacer nada. ¿Nada? ¡Sí, eso mismo!</p>
<p>El proceso de deploy de este sitio es extremadamente simple, se basa en copiar archivos de un directorio a otro. Y como todos los archivos que <span lang="en">eleventy</span> había generado, tenían rutas distintas a los originales, la primera solución resultó ser seguir sirviendo los antiguos archivos en sus <span lang="en">URIs</span> originales, teniendo así duplicados de muchas de mis páginas.</p>
<p>Esto servía para salir del paso, pero no me terminaba que convencer como solución, ya que, más pronto que tarde, estos duplicados comenzarían a diferir en contenido, generando inconsistencias. Entonces, me embarqué en la búsqueda de una solución más elegante y sostenible, la cual aún no encuentro.</p>
<p>Pero esto no significa que no haya mejorado la solución original.</p>
<p>Actualmente, he cambiado las copias de las páginas por enlaces simbólicos (<i lang="en">symlinks</i>, para los amigos). Los enlaces simbólicos me permiten tener una única versión de cada página, pero mantener accesibles las antiguas <span lang="en">URIs</span>. Esto solo resuelve el problema de la consistencia, ya que el cambio en las <span lang="en">URIs</span> sigue sin hacerse visible para los visitantes. Otro problema que todavía mantiene esta solución es el de la canonicidad de las páginas, al haber múltiples <span lang="en">URIs</span> para un mismo contenido, los motores de búsqueda como <span lang="en">Google</span> no saben cuál deberían sugerir en los resultados porque sus <i lang="en">bots</i> no tienen manera de saber que una de las direcciones corresponde a un enlace simbólico.</p>
<p>Este problema con los motores de búsqueda, de momento, lo estoy resolviendo, incluyendo, en todas las páginas, tags <abbr title="Hyper Text Markup Language">HTML</abbr> del estilo: <code>&lt;link rel=&quot;canonical&quot; href=&quot;https://iyaki.ar/blog/&quot;&gt;</code> lo que, <a href="https://developers.google.com/search/docs/crawling-indexing/consolidate-duplicate-urls?hl=es" target="_blank">según <span lang="en">Google</span></a> debería resolver el problema.</p>
<p>Aún no termino de decidir si eventualmente debería dar de baja las direcciones antiguas de manera definitiva (Opción tentadora para simplificar el mantenimiento, sobre todo teniendo en cuenta que esta web es bastante joven y las posibilidades de que haya enlaces de terceros a sus páginas aún son muy bajos) es por esto que, de manera cautelar, he agregado en la <a href="https://iyaki.ar/404.html" target="_blank">página de 404</a> un script <abbr title="Javascript" lang="en">JS</abbr> del <a href="https://archive.org/" target="_blank" lang="en" hreflang="en">Internet Archive</a> que permite recomendar automáticamente páginas web guardadas con anterioridad en su base de datos en caso de no existir la dirección solicitada.</p>
<p>Además, aprovechando esta posibilidad que me brinda <a href="https://web.archive.org/" target="_blank" lang="en" hreflang="en">WayBack Machine</a> del <span lang="en">Internet Archive</span>, para asegurarme de que mis posts y páginas queden almacenados, en el <span lang="en">Github Action</span> que se encarga de realizar las publicaciones agregué <a href="https://github.com/iyaki/iyaki.github.io/blob/main/.github/workflows/publish.yml#L21" target="_blank">una sección</a> para respaldar automáticamente el contenido de mi sitio web mediante la <abbr title="Application Programming Interface" lang="en">API</abbr> <abbr title="Representational State Transfer" lang="en">REST</abbr> que exponen.</p>
<p>Esto es todo por ahora, si tengo novedades sobre esta migración, sus ventajas y desafíos los verán en mis posts.</p>
<p lang="fr">Au revoir!</p>

</article>

	
	<script src="https://giscus.app/client.js" data-repo="iyaki/iyaki.github.io" data-repo-id="R_kgDOI1fGcg" data-category="Blogpost comments" data-category-id="DIC_kwDOI1fGcs4CdYrB" data-mapping="pathname" data-strict="1" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="preferred_color_scheme" data-lang="es" data-loading="lazy" crossorigin="anonymous" async></script>

</main>
<aside class="third-panel">
	
</aside>

</body>
</html>
